# Rural Road Scenario Configuration (Scalability Test)
# Texas-style rural town - 300 vehicle scale test
# KD-Tree based spatial indexing applied
# Local density measurement and reporting

# ==================== Simulation Basic Settings ====================
simulation:
  # Simulation execution time (seconds)
  # Target 300 vehicles: flow probability increased 1.8x + 600 second simulation
  # Expected: 9.187 vehicles/sec × 600s = 270-300 concurrent vehicles
  duration_seconds: 600
  step_length: 0.1
  output_directory: "../results_rural_scalability"
  log_level: "INFO"

# ==================== Vehicle Settings ====================
vehicles:
  # 300 vehicle scale test (auto-generated by SUMO flow)
  # Actual vehicle count determined by SUMO route file probability
  # Expected: 200-300 concurrent vehicles (peak time)
  count: 300  # Reference only (actual determined by SUMO flow)
  spawn_interval: 0.5  # SUMO flow based (reference only)
  communication_range: 300.0  # DSRC 300m range

# ==================== RSU Settings ====================
rsu:
  # Texas-style grid town: 9 RSUs (intersection centers)
  count: 9
  l1_anchor_period: 60
  l2_anchor_period: 180
  l3_anchor_period: 600

# ==================== SUMO Settings ====================
sumo:
  enabled: true
  # Texas-style rural town scenario (300 vehicle scale)
  # Probability increased 2.8x in SUMO route file (total probability ~5.0)
  # Expected concurrent vehicles: 200-300 (testing in dense areas)
  config_file: "../sumo/large_grid.sumo.cfg"
  use_gui: false  # GUI may cause performance degradation with 300 vehicles
  host: "localhost"
  port: 8813
  auto_start: true

# ==================== WAVE (IEEE 802.11p) Settings ====================
wave:
  tx_power_dbm: 20.0
  frequency_ghz: 5.9
  bandwidth_mhz: 10.0
  data_rate_mbps: 6.0
  range_m: 300.0
  # Rural roads have fewer obstacles, resulting in lower packet loss rate
  packet_loss_rate: 0.1
  cam_interval_ms: 100
  denm_priority: 6

# ==================== ToF (Time-of-Flight) Settings ====================
tof:
  sigma_tof_ns: 3.0
  max_tolerance_ns: 10.0
  use_uwb: true
  channel_noise_db: 20.0

# ==================== Witness Selection and Diversity Policy ====================
witness:
  profiles:
    - witnesses: 3
      threshold: 2
    - witnesses: 5
      threshold: 3
    - witnesses: 7
      threshold: 5
  # Rural roads have fewer vehicles, so use smaller profile
  default_profile: 0  # 3 witnesses

  diversity:
    # 300 vehicle environment: sufficient diversity can be secured
    # Maintain diversity criteria even in dense areas
    # Reputation diversity relaxed: initial reputation is in [0.3, 0.8] range
    # Relaxed min_R_diff to 0.20 to improve block generation success rate
    min_oem_entropy: 0.9  # Sufficient diversity among 20 OEMs
    max_per_oem_ratio: 0.4
    min_spatial_separation: 3.0  # Appropriate spacing in dense environment
    min_temporal_mad: 0.0
    min_reputation: 0.3
    min_reputation_diff: 0.20  # 0.30 → 0.20 relaxed (improved block generation success rate)

# ==================== Cryptography Settings ====================
crypto:
  pqc:
    vehicle_signature: "FALCON-512"
    rsu_signature: "DILITHIUM-3"
    kem: "ML-KEM-768"
  aead:
    algorithm: "XChaCha20-Poly1305"
    kdf: "HKDF-SHA3-256"

# ==================== Off-chain Storage Settings ====================
offchain:
  shamir:
    threshold: 3
    total_shares: 5
  tiers:
    hot:
      duration_minutes: 5
      redundancy: "none"
    warm:
      duration_hours: 24
      redundancy: "(3,5)"
    cold:
      redundancy: "(6,10)"

# ==================== libp2p Settings ====================
libp2p:
  enabled: true
  enable_dht: true
  enable_gossipsub: true
  enable_bitswap: true
  bootstrap_peers: []

# ==================== Performance Goals ====================
performance:
  local_finality_target_ms: 100
  max_block_size_kb: 10
  max_signature_bandwidth_kbps: 50

# ==================== Evaluation and Test Settings ====================
evaluation:
  collect_metrics: true
  metrics_interval: 10
  verbose_logging: false
  realtime_dashboard: true

# ==================== Advanced Settings ====================
advanced:
  enable_multithreading: true
  worker_threads: 0
  memory_limit_mb: 2048
